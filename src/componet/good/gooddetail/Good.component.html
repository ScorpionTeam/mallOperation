<!--
<div class="hk_form_title">
  图片信息
</div>
<upload-pic [type]="'0'"  [initUrl]="initUrl" (uploadSuccess)="imgUpload($event)" (delSuccess)="delPic()"></upload-pic>
<div class="hk_form_title">
  基本信息
</div>
<form nz-form  [formGroup]="validateForm">
  <div nz-row [nzGutter]="40">
    <div nz-col [nzSpan]="8">
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="5">
          <label nz-form-item-required>名称</label>
        </div>
        <div nz-form-control [nzValidateStatus]="validateForm.controls.name" nz-col [nzSpan]="15">
          <nz-input [nzSize]="'large'" formControlName="name" [nzPlaceHolder]="'商品名'"  [(ngModel)]="good.goodName" name="name"></nz-input>
        </div>
        <div nz-form-explain nz-col [nzSpan]="3" [class]="'form_tip'" *ngIf="validateForm.controls.name.dirty&&validateForm.controls.name.hasError('required')">必填</div>
      </div>
    </div>
    <div nz-col [nzSpan]="8">
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="5">
          <label nz-form-item-required>商品编码</label>
        </div>
        <div nz-form-control [nzValidateStatus]="validateForm.controls.goodNo" nz-col [nzSpan]="15">
          <nz-input [nzSize]="'large'" formControlName="goodNo" [nzPlaceHolder]="'商品编码'"  [(ngModel)]="good.goodNo" name="goodNo"></nz-input>
        </div>
        <div nz-form-explain nz-col [nzSpan]="3" [class]="'form_tip'" *ngIf="validateForm.controls.goodNo.dirty&&validateForm.controls.goodNo.hasError('required')">必填</div>
      </div>
    </div>
    <div nz-col [nzSpan]="8">
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="5">
          <label nz-form-item-required>类目</label>
        </div>
        <div nz-form-control  nz-col [nzSpan]="15">
          <nz-select  [nzPlaceHolder]="'请选择'" [(ngModel)]="good.categoryId" name="categoryId" formControlName="categoryId">
            <nz-option [nzLabel]="'请选择'" [nzValue]="0"></nz-option>
            <nz-option [nzLabel]="'饮料'" [nzValue]="1"></nz-option>
          </nz-select>
          <div nz-form-explain nz-col [nzSpan]="3" [class]="'form_tip'" *ngIf="validateForm.controls.categoryId.dirty&&validateForm.controls.categoryId.hasError('required')">必填</div>
        </div>
      </div>
    </div>
    <div nz-col [nzSpan]="8">
      <div nz-form-item  nz-row>
        <div nz-form-label nz-col [nzSpan]="5">
          <label nz-form-item-required>品牌</label>
        </div>
        <div nz-form-control  nz-col [nzSpan]="15">
          <nz-select  [nzPlaceHolder]="'请选择'" [(ngModel)]="good.brandId" name="brandId" formControlName="brandId">
            <nz-option [nzLabel]="'请选择'" [nzValue]="0"></nz-option>
            <nz-option [nzLabel]="'耐克'" [nzValue]="1"></nz-option>
          </nz-select>
          <div nz-form-explain nz-col [nzSpan]="3" [class]="'form_tip'" *ngIf="validateForm.controls.brandId.dirty&&validateForm.controls.brandId.hasError('required')">必填</div>
        </div>
      </div>
    </div>
    <div nz-col [nzSpan]="8">
      <div nz-form-item  nz-row>
        <div nz-form-label nz-col [nzSpan]="5">
          <label nz-form-item-required>单价</label>
        </div>
        <div nz-form-control nz-col [nzSpan]="15">
          <nz-input-number [style.width]="'100%'" [nzSize]="'large'" [nzPlaceHolder]="'输入单价'" [(ngModel)]="good.price"  name="price" formControlName="price" (nzBlur)="priceChange()"></nz-input-number>
          <div nz-form-explain nz-col [nzSpan]="3" [class]="'form_tip'" *ngIf="validateForm.controls.price.dirty&&validateForm.controls.price.hasError('required')">必填</div>
        </div>
      </div>
    </div>
    <div nz-col [nzSpan]="8">
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="5">
          <label >促销价</label>
        </div>
        <div nz-form-control nz-col [nzSpan]="15">
          <nz-input-number [nzSize]="'large'" [style.width]="'100%'" [nzDisabled]="true" [nzPlaceHolder]="'促销价'"  [(ngModel)]="good.promotion"  formControlName="promotion" name="promotion" ></nz-input-number>
        </div>
      </div>
    </div>
    <div nz-col [nzSpan]="8">
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="5">
          <label >折扣</label>
        </div>
        <div nz-form-control nz-col [nzSpan]="15">
          <nz-input-number [nzSize]="'large'"  [nzPlaceHolder]="'折扣'"  [(ngModel)]="good.discount"  formControlName="discount" name="discount" [style.width]="'100%'" (nzBlur)="priceChange()"></nz-input-number>
        </div>
      </div>
    </div>
    <div nz-col [nzSpan]="8">
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="5">
          <label nz-form-item-required>库存</label>
        </div>
        <div nz-form-control nz-col [nzSpan]="15">
          <nz-input-number [style.width]="'100%'" [nzSize]="'large'" [nzPlaceHolder]="'库存'"  [(ngModel)]="good.stock" name="stock" formControlName="stock"></nz-input-number>
          <div nz-form-explain nz-col [nzSpan]="3" [class]="'form_tip'" *ngIf="validateForm.controls.stock.dirty&&validateForm.controls.stock.hasError('required')">必填</div>
        </div>
      </div>
    </div>
    <div nz-col [nzSpan]="8">
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="5">
          <label >上架状态</label>
        </div>
        <div nz-form-control nz-col [nzSpan]="15">
          <nz-switch [(ngModel)]="good.isOnSale" formControlName="isOnSale" name="OnSale">
            <span checked>是</span>
            <span unchecked>否</span>
          </nz-switch>
        </div>
      </div>
    </div>
    <div nz-col [nzSpan]="8">
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="5">
          <label >热销</label>
        </div>
        <div nz-form-control nz-col [nzSpan]="15">
          <nz-switch [(ngModel)]="good.isHot"formControlName="isHot" name="hot">
            <span checked>是</span>
            <span unchecked>否</span>
          </nz-switch>
        </div>
      </div>
    </div>
    <div nz-col [nzSpan]="8">
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="5">
          <label >新品</label>
        </div>
        <div nz-form-control nz-col [nzSpan]="15">
          <nz-switch [(ngModel)]="good.isNew"formControlName="isNew" name="new">
            <span checked>是</span>
            <span unchecked>否</span>
          </nz-switch>
        </div>
      </div>
    </div>
    <div nz-col [nzSpan]="8">
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="5">
          <label >包邮</label>
        </div>
        <div nz-form-control nz-col [nzSpan]="15">
          <nz-switch [(ngModel)]="good.isFreight" formControlName="isFreight" name="mail">
            <span checked>是</span>
            <span unchecked>否</span>
          </nz-switch>
        </div>
      </div>
    </div>
    <div nz-col [nzSpan]="8">
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="5">
          <label >商品描述</label>
        </div>
        <div nz-form-control nz-col [nzSpan]="15" class="textarea">
          <nz-input [nzType]="'textarea'" [nzRows]="'4'" [(ngModel)]="good.description" formControlName="description" name="describe"></nz-input>`
        </div>
      </div>
    </div>
  </div>
  <div nz-row>
    <div nz-col [nzSpan]="24" style="text-align: center;">
      <button nz-button [nzType]="'primary'" (click)="save()">保存</button>
      <button nz-button (click)="back()">返回</button>
    </div>
  </div>
</form>
-->
<div class="good_content">
  <div class="hk_form_title">主图信息</div>
  <upload-pic [type]="'0'"  [initUrl]="initUrl" (uploadSuccess)="imgUpload($event,0)" (delSuccess)="delPic($event)" [alt]="'上传主图'"></upload-pic>
  <div class="hk_form_title">辅图信息</div>
  <div nz-row>
    <upload-pic [type]="'1'"  [initUrl]="initLittleUrl.length>=2?initLittleUrl[1].url:undefined"
                (uploadSuccess)="imgUpload($event,1)" (delSuccess)="delPic($event)" [alt]="'上传辅图'"
                nz-col [nzSpan]="5" [nzOffset]="1"></upload-pic>
    <upload-pic [type]="'1'"  [initUrl]="initLittleUrl.length>=3?initLittleUrl[2].url:undefined"
                (uploadSuccess)="imgUpload($event,1)" (delSuccess)="delPic($event)" [alt]="'上传辅图'"
                nz-col [nzSpan]="5" [nzOffset]="1"></upload-pic>
    <upload-pic [type]="'1'"  [initUrl]="initLittleUrl.length>=4?initLittleUrl[3].url:undefined"
                (uploadSuccess)="imgUpload($event,1)" (delSuccess)="delPic($event)" [alt]="'上传辅图'"
                nz-col [nzSpan]="5" [nzOffset]="1"></upload-pic>
    <upload-pic [type]="'1'"  [initUrl]="initLittleUrl.length>=5?initLittleUrl[4].url:undefined"
                (uploadSuccess)="imgUpload($event,1)" (delSuccess)="delPic($event)" [alt]="'上传辅图'"
                nz-col [nzSpan]="5"></upload-pic>
  </div>
  <div class="hk_form_title">基本信息</div>
  <form nz-form  [formGroup]="validateForm">
    <div nz-form-item>
      <div nz-row class="hk_form_item">
        <label nz-form-label nz-form-item-required nz-col [nzSpan]="2">名称</label>
        <div nz-col [nzSpan]="12"  [nzOffset]="1" nz-form-control>
          <nz-input [(ngModel)]="good.goodName" formControlName="name"></nz-input>
        </div>
      </div>
      <div nz-row class="hk_form_item" style="line-height: 0;">
        <label nz-form-label nz-form-item-required nz-col [nzSpan]="2">商品描述</label>
        <div nz-col [nzSpan]="12"  [nzOffset]="1">
          <nz-input [nzType]="'textarea'" [nzRows]="'4'" [(ngModel)]="good.description" formControlName="description" name="describe"></nz-input>`
        </div>
      </div>
      <div nz-row class="hk_form_item">
        <label nz-form-label nz-form-item-required nz-col [nzSpan]="2">商品编码</label>
        <div nz-col [nzSpan]="12"  [nzOffset]="1" nz-form-control>
          <nz-input [(ngModel)]="good.goodNo " formControlName="goodNo"></nz-input>
        </div>
      </div>
      <div nz-row class="hk_form_item">
        <label nz-form-label nz-form-item-required nz-col [nzSpan]="2">类目</label>
        <div nz-col [nzSpan]="8"  [nzOffset]="1" nz-form-control>
          <nz-select  [nzPlaceHolder]="'请选择'" [(ngModel)]="good.categoryId" name="categoryId" formControlName="categoryId">
            <nz-option [nzLabel]="'请选择'" [nzValue]="0"></nz-option>
            <nz-option [nzLabel]="'饮料'" [nzValue]="1"></nz-option>
          </nz-select>
        </div>
      </div>
      <div nz-row class="hk_form_item">
        <label nz-form-label nz-form-item-required nz-col [nzSpan]="2">品牌</label>
        <div nz-col [nzSpan]="8"  [nzOffset]="1" nz-form-control>
          <nz-select  [nzPlaceHolder]="'请选择'" [(ngModel)]="good.brandId" name="brandId" formControlName="brandId">
            <nz-option [nzLabel]="'请选择'" [nzValue]="0"></nz-option>
            <nz-option [nzLabel]="'耐克'" [nzValue]="1"></nz-option>
          </nz-select>
        </div>
      </div>
      <div nz-row class="hk_form_item">
        <label nz-form-label nz-form-item-required nz-col [nzSpan]="2">单价</label>
        <div nz-col [nzSpan]="6"  [nzOffset]="1" nz-form-control>
          <nz-input-number [style.width]="'100%'" [nzSize]="'large'" [nzMin]="0" [nzPlaceHolder]="'输入单价'" [(ngModel)]="good.price"  name="price" formControlName="price" (nzBlur)="priceChange()"></nz-input-number>
        </div>
      </div>
      <div nz-row class="hk_form_item">
        <label nz-form-label nz-form-item-required nz-col [nzSpan]="2">折扣</label>
        <div nz-col [nzSpan]="6"  [nzOffset]="1" nz-form-control>
          <nz-input-number [nzSize]="'large'"  [nzPlaceHolder]="'折扣'" [nzMin]="0" [(ngModel)]="good.discount"  formControlName="discount" name="discount" [style.width]="'100%'" (nzBlur)="priceChange()"></nz-input-number>
        </div>
      </div>
      <div nz-row class="hk_form_item">
        <label nz-form-label nz-form-item-required nz-col [nzSpan]="2">促销价</label>
        <div nz-col [nzSpan]="6"  [nzOffset]="1" nz-form-control>
          <nz-input-number [nzSize]="'large'" [style.width]="'100%'" [nzMin]="0" [nzDisabled]="true" [nzPlaceHolder]="'促销价'"  [(ngModel)]="good.promotion"  formControlName="promotion" name="promotion" ></nz-input-number>
        </div>
      </div>
      <div nz-row class="hk_form_item">
        <label nz-form-label nz-form-item-required nz-col [nzSpan]="2">库存</label>
        <div nz-col [nzSpan]="6"  [nzOffset]="1" nz-form-control>
          <nz-input-number [style.width]="'100%'" [nzSize]="'large'" [nzMin]="0" [nzPlaceHolder]="'库存'"  [(ngModel)]="good.stock" name="stock" formControlName="stock"></nz-input-number>
        </div>
      </div>
      <div nz-row class="hk_form_item">
        <label nz-form-label nz-form-item-required nz-col [nzSpan]="2">上架状态</label>
        <div nz-col [nzSpan]="6"  [nzOffset]="1" nz-form-control>
          <nz-switch [(ngModel)]="good.isOnSale" formControlName="isOnSale" name="OnSale">
            <span checked>是</span>
            <span unchecked>否</span>
          </nz-switch>
        </div>
      </div>
      <div nz-row class="hk_form_item">
        <label nz-form-label nz-form-item-required nz-col [nzSpan]="2">热销</label>
        <div nz-col [nzSpan]="6"  [nzOffset]="1" nz-form-control>
          <nz-switch [(ngModel)]="good.isHot"formControlName="isHot" name="hot">
            <span checked>是</span>
            <span unchecked>否</span>
          </nz-switch>
        </div>
      </div>
      <div nz-row class="hk_form_item">
        <label nz-form-label nz-form-item-required nz-col [nzSpan]="2">新品</label>
        <div nz-col [nzSpan]="6"  [nzOffset]="1" nz-form-control>
          <nz-switch [(ngModel)]="good.isNew"formControlName="isNew" name="new">
            <span checked>是</span>
            <span unchecked>否</span>
          </nz-switch>
        </div>
      </div>
      <div nz-row class="hk_form_item">
        <label nz-form-label nz-form-item-required nz-col [nzSpan]="2">包邮</label>
        <div nz-col [nzSpan]="6"  [nzOffset]="1" nz-form-control>
          <nz-switch [(ngModel)]="good.isFreight" formControlName="isFreight" name="mail">
            <span checked>是</span>
            <span unchecked>否</span>
          </nz-switch>
        </div>
      </div>
    </div>
  </form>
<!--  <div class="hk_form_title" *ngIf="isDetail">规格配置</div>
  <button nz-button [nzType]="'primary'" (click)="addAttr(0)" *ngIf="isDetail">
    <span>新增规格</span>
  </button>
  &lt;!&ndash;  <button nz-button [nzType]="'primary'" (click)="addAttr(1)">
      <span>新增规格值</span>
    </button>&ndash;&gt;
  <div nz-row class="good_attr" *ngIf="isDetail">
    <div nz-col [nzSpan]="24" class="hk_form_item">
      <nz-table #attrList [nzAjaxData]="good.goodAttrExts" [nzIsPagination]="false" [style]="'text-align:center;'">
        <thead nz-thead>
        <tr>
          <th nz-th><span>属性名</span></th>
          <th nz-th><span>版本号</span></th>
          <th nz-th><span>操作</span></th>
        </tr>
        </thead>
        <tbody nz-tbody>
        <tr nz-tbody-tr *ngFor="let data of good.goodAttrExts;let i=index;">
          <td nz-td >{{data.attrName}}</td>
          <td nz-td>{{data.verNo}}</td>
          <td nz-td>
            <a (click)="editAttr(i,data)">修改</a>
            <span nz-table-divider></span>
            <a (click)="delAttr(i)">删除</a>
          </td>
        </tr>
        </tbody>
      </nz-table>
    </div>
    &lt;!&ndash;    <div nz-col [nzSpan]="24" class="hk_form_item">
          <nz-table #attrList [nzAjaxData]="good.attrList" [nzIsPagination]="false" [style]="'text-align:center;'">
            <thead nz-thead>
            <tr>
              <th nz-th><span>属性名</span></th>
              <th nz-th><span>版本号</span></th>
              <th nz-th><span>操作</span></th>
            </tr>
            </thead>
            <tbody nz-tbody>
            <tr nz-tbody-tr *ngFor="let data of good.attrList;let i=index;" (click)="selectAttr(i,data.id)">
              <td nz-td *ngIf="i!=editRow">{{data.attrName}}</td>
              <td nz-td *ngIf="i!=editRow">{{data.verNo}}</td>
              <td nz-td *ngIf="i==editRow">
                <nz-input [(ngModel)]="editObj.attrName"></nz-input>
              </td>
              <td nz-td *ngIf="i==editRow">
                <nz-input [(ngModel)]="editObj.verNo"></nz-input>
              </td>
              <td nz-td>
                <span *ngIf="i==editRow&&isAddAttr">
                  <a (click)="saveAttr(0,2)">保存</a>
                  <span nz-table-divider></span>
                  <a (click)="cancAttr(2)">取消</a>
                </span>
                <span *ngIf="i!=editRow">
                  <a (click)="editAttr(i,data,0)">修改</a>
                  <span nz-table-divider></span>
                  <a (click)="delAttr(i)">删除</a>
                </span>
                <span *ngIf="i==editRow&&!isAddAttr">
                  <a (click)="saveAttr(data.id,0)">保存</a>
                  <span nz-table-divider></span>
                  <a (click)="cancAttr(0)">取消</a>
                </span>
              </td>
            </tr>
            </tbody>
          </nz-table>
        </div>
        <div nz-col [nzSpan]="10" [nzOffset]="2" class="hk_form_item">
          <nz-table #attrValueList [nzAjaxData]="curAttrValueList" [nzIsPagination]="false">
            <thead nz-thead>
            <tr>
              <th nz-th><span>属性值</span></th>
              <th nz-th><span>操作</span></th>
            </tr>
            </thead>
            <tbody nz-tbody>
            <tr nz-tbody-tr *ngFor="let data of attrValueList.data;let i=index;">
              <td nz-td *ngIf="i!=editValueRow">{{data.attrValueName}}</td>
              <td nz-td *ngIf="i==editValueRow">
                <nz-input [(ngModel)]="editObj.attrValueName"></nz-input>
              </td>
              <td nz-td>
                <span *ngIf="i!=editValueRow">
                  <a (click)="editAttr(i,data,1)">修改</a>
                  <span nz-table-divider></span>
                  <a (click)="delAttr(i,1)">删除</a>
                </span>
                <span *ngIf="i==editValueRow&&!isAddAttrValue">
                  <a (click)="saveAttr(data.id,1)">保存</a>
                  <span nz-table-divider></span>
                  <a (click)="cancAttr(1)">取消</a>
                </span>
                <span *ngIf="i==editValueRow&&isAddAttrValue">
                  <a (click)="saveAttr(0,3)">保存</a>
                  <span nz-table-divider></span>
                  <a (click)="cancAttr(3)">取消</a>
                </span>
              </td>
            </tr>
            </tbody>
          </nz-table>
        </div>&ndash;&gt;
  </div>-->
  <div class="hk_form_title">产品信息</div>
  <hk-editor [ckeditorContent]="good.richContent" (blur)="getRitchContent($event)"></hk-editor>
  <div class="good_foot">
    <button nz-button [nzType]="'primary'" (click)="save()">保存</button>
    <button nz-button (click)="back()">返回</button>
  </div>
</div>
<nz-modal [nzVisible]="isAttrShow" [nzContent]="modalContent"
          [nzFooter]="modalFooter" [nzMaskClosable]="false"
          [nzTitle]="AttrModalTit" (nzOnCancel)="closeModal()">
  <ng-template #modalContent>
    <div class="content_attr">
      <form nz-form>
        <div nz-row class="hk_form_item">
          <label nz-form-label nz-form-item-required nz-col [nzSpan]="5">属性名</label>
          <div nz-form-control nz-form-item nz-col [nzSpan]="13" [nzOffset]="1">
            <nz-input [(ngModel)]="modalObj.attrName" name="name"></nz-input>
          </div>
        </div>
        <div nz-row class="hk_form_item">
          <label nz-form-label nz-form-item-required nz-col [nzSpan]="5">版本号</label>
          <div nz-form-control nz-form-item nz-col [nzSpan]="13" [nzOffset]="1">
            <nz-input [(ngModel)]="modalObj.verNo" name="verNo"></nz-input>
          </div>
        </div>
        <div nz-row class="hk_form_item">
          <label nz-form-label nz-form-item-required nz-col [nzSpan]="5">属性值</label>
          <div class="good_attrValueList_warpper" nz-col [nzSpan]="15" [nzOffset]="1">
            <div class="good_attrValueList">
              <div nz-row *ngFor="let attrVData of modalArray;let i = index;">
                <div class="hk_form_item" nz-col [nzSpan]="5">
                  <nz-input [(ngModel)]="modalArray[i].attrValue" [name]="'attrValue'+i" [nzPlaceHolder]="'属性值'"></nz-input>
                </div>
                <div class="hk_form_item" nz-col [nzSpan]="13" [nzOffset]="1">
                  <nz-input [(ngModel)]="modalArray[i].attrValueName" [name]="'attrValueName'+i" [nzPlaceHolder]="'属性值名称'"></nz-input>
                </div>
                <button nz-button [nzShape]="'circle'" class="good_attrValueList_del" (click)="delAttr(1,i)">
                  <i class="anticon anticon-minus"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </form>
      <div class="hk_detail_form_footer">
        <button nz-button [nzSize]="large" class="good_attrValueList_add" (click)="addAttr(1)">
          <span>新增属性值</span>
        </button>
      </div>
    </div>
  </ng-template>
  <ng-template #modalFooter>
    <button nz-button [nzType]="'primary'" (click)="saveAttr()">确认</button>
    <button nz-button [nzType]="'default'" (click)="closeModal()">取消</button>
  </ng-template>
</nz-modal>
